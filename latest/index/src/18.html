<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>C:\projects\identity-firebase\src\Aguacongas.Identity.Firebase\RoleStore.cs</title>
    <script type="text/javascript" src="../js/dotcover.sourceview.js"></script>
    <link rel="stylesheet" type="text/css" href="../css/dotcover.report.css" />
  </head>
  <body>
    <pre id="content" class="source-code">
using Aguacongas.Firebase;
using Microsoft.AspNetCore.Identity;
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Linq;
using System.Net;
using System.Security.Claims;
using System.Text;
using System.Threading;
using System.Threading.Tasks;

namespace Aguacongas.Identity.Firebase
{
    /// &lt;summary&gt;
    /// Creates a new instance of a persistence store for roles.
    /// &lt;/summary&gt;
    /// &lt;typeparam name=&quot;TRole&quot;&gt;The type of the class representing a role.&lt;/typeparam&gt;
    public class RoleStore&lt;TRole&gt; : RoleStore&lt;TRole, IdentityUserRole&lt;string&gt;, IdentityRoleClaim&lt;string&gt;&gt;,
        IRoleClaimStore&lt;TRole&gt;
        where TRole : IdentityRole&lt;string&gt;
    {
        /// &lt;summary&gt;
        /// Constructs a new instance of &lt;see cref=&quot;RoleStore{TRole}&quot;/&gt;.
        /// &lt;/summary&gt;
        /// &lt;param name=&quot;context&quot;&gt;The &lt;see cref=&quot;DbContext&quot;/&gt;.&lt;/param&gt;
        /// &lt;param name=&quot;describer&quot;&gt;The &lt;see cref=&quot;IdentityErrorDescriber&quot;/&gt;.&lt;/param&gt;
        public RoleStore(IFirebaseClient client, IdentityErrorDescriber describer = null) : base(client, describer) { }
    }

    /// &lt;summary&gt;
    /// Creates a new instance of a persistence store for roles.
    /// &lt;/summary&gt;
    /// &lt;typeparam name=&quot;TRole&quot;&gt;The type of the class representing a role.&lt;/typeparam&gt;
    /// &lt;typeparam name=&quot;TUserRole&quot;&gt;The type of the class representing a user role.&lt;/typeparam&gt;
    /// &lt;typeparam name=&quot;TRoleClaim&quot;&gt;The type of the class representing a role claim.&lt;/typeparam&gt;
    public class RoleStore&lt;TRole, TUserRole, TRoleClaim&gt; :
        IQueryableRoleStore&lt;TRole&gt;,
        IRoleClaimStore&lt;TRole&gt;
        where TRole : IdentityRole&lt;string&gt;
        where TUserRole : IdentityUserRole&lt;string&gt;, new()
        where TRoleClaim : IdentityRoleClaim&lt;string&gt;, new()
    {
        private const string RolesTableName = &quot;roles&quot;;
        private const string RoleClaimsTableName = &quot;role-claims&quot;;

        protected const string RulePath = &quot;.settings/rules.json&quot;;

        private readonly IFirebaseClient _client;
        private bool _disposed;

        /// &lt;summary&gt;
        /// A navigation property for the roles the store contains.
        /// &lt;/summary&gt;
        public IQueryable&lt;TRole&gt; Roles
        {
            get
            {
                var response = _client.GetAsync&lt;Dictionary&lt;string, TRole&gt;&gt;(GetFirebasePath(RolesTableName)).GetAwaiter().GetResult();
                var roleDictionary = response.Data;
                if (roleDictionary == null)
                {
                    return new List&lt;TRole&gt;().AsQueryable();
                }

                return roleDictionary.Select(kv =&gt;
                {
                    var role = kv.Value;
                    role.Id = kv.Key;
                    return role;
                }).AsQueryable();
            }
        }


        /// &lt;summary&gt;
        /// Constructs a new instance of &lt;see cref=&quot;RoleStore{TRole, TUserRole, TRoleClaim}&quot;/&gt;.
        /// &lt;/summary&gt;
        /// &lt;param name=&quot;context&quot;&gt;The &lt;see cref=&quot;DbContext&quot;/&gt;.&lt;/param&gt;
        /// &lt;param name=&quot;describer&quot;&gt;The &lt;see cref=&quot;IdentityErrorDescriber&quot;/&gt;.&lt;/param&gt;
        public RoleStore(IFirebaseClient client, IdentityErrorDescriber describer = null)
        {
            _client = client ?? throw new ArgumentNullException(nameof(client));
            ErrorDescriber = describer ?? new IdentityErrorDescriber();
        }

        /// &lt;summary&gt;
        /// Gets or sets the &lt;see cref=&quot;IdentityErrorDescriber&quot;/&gt; for any error that occurred with the current operation.
        /// &lt;/summary&gt;
        public IdentityErrorDescriber ErrorDescriber { get; set; }

        /// &lt;summary&gt;
        /// Creates a new role in a store as an asynchronous operation.
        /// &lt;/summary&gt;
        /// &lt;param name=&quot;role&quot;&gt;The role to create in the store.&lt;/param&gt;
        /// &lt;param name=&quot;cancellationToken&quot;&gt;The &lt;see cref=&quot;CancellationToken&quot;/&gt; used to propagate notifications that the operation should be canceled.&lt;/param&gt;
        /// &lt;returns&gt;A &lt;see cref=&quot;Task{TResult}&quot;/&gt; that represents the &lt;see cref=&quot;IdentityResult&quot;/&gt; of the asynchronous query.&lt;/returns&gt;
        public async virtual Task&lt;IdentityResult&gt; CreateAsync(TRole role, CancellationToken cancellationToken = default(CancellationToken))
        {
            cancellationToken.ThrowIfCancellationRequested();
            ThrowIfDisposed();
            if (role == null)
            {
                throw new ArgumentNullException(nameof(role));
            }
            var response = await _client.PostAsync(GetFirebasePath(RolesTableName), role, cancellationToken, true);
            role.Id = response.Data;
            role.ConcurrencyStamp = response.Etag;

            return IdentityResult.Success;
        }

        /// &lt;summary&gt;
        /// Updates a role in a store as an asynchronous operation.
        /// &lt;/summary&gt;
        /// &lt;param name=&quot;role&quot;&gt;The role to update in the store.&lt;/param&gt;
        /// &lt;param name=&quot;cancellationToken&quot;&gt;The &lt;see cref=&quot;CancellationToken&quot;/&gt; used to propagate notifications that the operation should be canceled.&lt;/param&gt;
        /// &lt;returns&gt;A &lt;see cref=&quot;Task{TResult}&quot;/&gt; that represents the &lt;see cref=&quot;IdentityResult&quot;/&gt; of the asynchronous query.&lt;/returns&gt;
        public async virtual Task&lt;IdentityResult&gt; UpdateAsync(TRole role, CancellationToken cancellationToken = default(CancellationToken))
        {
            cancellationToken.ThrowIfCancellationRequested();
            ThrowIfDisposed();
            if (role == null)
            {
                throw new ArgumentNullException(nameof(role));
            }

            try
            {
                var response = await _client.PutAsync(GetFirebasePath(RolesTableName, role.Id), role, cancellationToken, true, role.ConcurrencyStamp);
                role.ConcurrencyStamp = response.Etag;
            }
            catch (FirebaseException e)
                when(e.StatusCode == HttpStatusCode.PreconditionFailed)
            {
                return IdentityResult.Failed(ErrorDescriber.ConcurrencyFailure());
            }


            return IdentityResult.Success;
        }

        /// &lt;summary&gt;
        /// Deletes a role from the store as an asynchronous operation.
        /// &lt;/summary&gt;
        /// &lt;param name=&quot;role&quot;&gt;The role to delete from the store.&lt;/param&gt;
        /// &lt;param name=&quot;cancellationToken&quot;&gt;The &lt;see cref=&quot;CancellationToken&quot;/&gt; used to propagate notifications that the operation should be canceled.&lt;/param&gt;
        /// &lt;returns&gt;A &lt;see cref=&quot;Task{TResult}&quot;/&gt; that represents the &lt;see cref=&quot;IdentityResult&quot;/&gt; of the asynchronous query.&lt;/returns&gt;
        public async virtual Task&lt;IdentityResult&gt; DeleteAsync(TRole role, CancellationToken cancellationToken = default(CancellationToken))
        {
            cancellationToken.ThrowIfCancellationRequested();
            ThrowIfDisposed();
            if (role == null)
            {
                throw new ArgumentNullException(nameof(role));
            }

            try
            {
                await _client.DeleteAsync(GetFirebasePath(RolesTableName, role.Id), cancellationToken, true, role.ConcurrencyStamp);
            }
            catch (FirebaseException e)
            {
                if (e.StatusCode == HttpStatusCode.PreconditionFailed)
                {
                    return IdentityResult.Failed(ErrorDescriber.ConcurrencyFailure());
                }
                throw;
            }
            return IdentityResult.Success;
        }

        /// &lt;summary&gt;
        /// Gets the ID for a role from the store as an asynchronous operation.
        /// &lt;/summary&gt;
        /// &lt;param name=&quot;role&quot;&gt;The role whose ID should be returned.&lt;/param&gt;
        /// &lt;param name=&quot;cancellationToken&quot;&gt;The &lt;see cref=&quot;CancellationToken&quot;/&gt; used to propagate notifications that the operation should be canceled.&lt;/param&gt;
        /// &lt;returns&gt;A &lt;see cref=&quot;Task{TResult}&quot;/&gt; that contains the ID of the role.&lt;/returns&gt;
        public virtual Task&lt;string&gt; GetRoleIdAsync(TRole role, CancellationToken cancellationToken = default(CancellationToken))
        {
            cancellationToken.ThrowIfCancellationRequested();
            ThrowIfDisposed();
            if (role == null)
            {
                throw new ArgumentNullException(nameof(role));
            }
            return Task.FromResult(role.Id);
        }

        /// &lt;summary&gt;
        /// Gets the name of a role from the store as an asynchronous operation.
        /// &lt;/summary&gt;
        /// &lt;param name=&quot;role&quot;&gt;The role whose name should be returned.&lt;/param&gt;
        /// &lt;param name=&quot;cancellationToken&quot;&gt;The &lt;see cref=&quot;CancellationToken&quot;/&gt; used to propagate notifications that the operation should be canceled.&lt;/param&gt;
        /// &lt;returns&gt;A &lt;see cref=&quot;Task{TResult}&quot;/&gt; that contains the name of the role.&lt;/returns&gt;
        public virtual Task&lt;string&gt; GetRoleNameAsync(TRole role, CancellationToken cancellationToken = default(CancellationToken))
        {
            cancellationToken.ThrowIfCancellationRequested();
            ThrowIfDisposed();
            if (role == null)
            {
                throw new ArgumentNullException(nameof(role));
            }
            return Task.FromResult(role.Name);
        }

        /// &lt;summary&gt;
        /// Sets the name of a role in the store as an asynchronous operation.
        /// &lt;/summary&gt;
        /// &lt;param name=&quot;role&quot;&gt;The role whose name should be set.&lt;/param&gt;
        /// &lt;param name=&quot;roleName&quot;&gt;The name of the role.&lt;/param&gt;
        /// &lt;param name=&quot;cancellationToken&quot;&gt;The &lt;see cref=&quot;CancellationToken&quot;/&gt; used to propagate notifications that the operation should be canceled.&lt;/param&gt;
        /// &lt;returns&gt;The &lt;see cref=&quot;Task&quot;/&gt; that represents the asynchronous operation.&lt;/returns&gt;
        public virtual Task SetRoleNameAsync(TRole role, string roleName, CancellationToken cancellationToken = default(CancellationToken))
        {
            cancellationToken.ThrowIfCancellationRequested();
            ThrowIfDisposed();
            if (role == null)
            {
                throw new ArgumentNullException(nameof(role));
            }
            role.Name = roleName;
            return Task.CompletedTask;
        }

        /// &lt;summary&gt;
        /// Finds the role who has the specified ID as an asynchronous operation.
        /// &lt;/summary&gt;
        /// &lt;param name=&quot;id&quot;&gt;The role ID to look for.&lt;/param&gt;
        /// &lt;param name=&quot;cancellationToken&quot;&gt;The &lt;see cref=&quot;CancellationToken&quot;/&gt; used to propagate notifications that the operation should be canceled.&lt;/param&gt;
        /// &lt;returns&gt;A &lt;see cref=&quot;Task{TResult}&quot;/&gt; that result of the look up.&lt;/returns&gt;
        public virtual async Task&lt;TRole&gt; FindByIdAsync(string id, CancellationToken cancellationToken = default(CancellationToken))
        {
            cancellationToken.ThrowIfCancellationRequested();
            ThrowIfDisposed();
            var response = await _client.GetAsync&lt;TRole&gt;(GetFirebasePath(RolesTableName, id), cancellationToken, true);
            var role = response.Data;
            if (role != null)
            {
                role.Id = id;
                role.ConcurrencyStamp = response.Etag;
            }

            return role;
        }

        /// &lt;summary&gt;
        /// Finds the role who has the specified normalized name as an asynchronous operation.
        /// &lt;/summary&gt;
        /// &lt;param name=&quot;normalizedName&quot;&gt;The normalized role name to look for.&lt;/param&gt;
        /// &lt;param name=&quot;cancellationToken&quot;&gt;The &lt;see cref=&quot;CancellationToken&quot;/&gt; used to propagate notifications that the operation should be canceled.&lt;/param&gt;
        /// &lt;returns&gt;A &lt;see cref=&quot;Task{TResult}&quot;/&gt; that result of the look up.&lt;/returns&gt;
        public virtual async Task&lt;TRole&gt; FindByNameAsync(string normalizedName, CancellationToken cancellationToken = default(CancellationToken))
        {
            cancellationToken.ThrowIfCancellationRequested();
            ThrowIfDisposed();

            Dictionary&lt;string, TRole&gt; data;
            try
            {
                var response = await _client.GetAsync&lt;Dictionary&lt;string, TRole&gt;&gt;(GetFirebasePath(RolesTableName), cancellationToken, false, $&quot;orderBy=\&quot;NormalizedName\&quot;&amp;equalTo=\&quot;{normalizedName}\&quot;&quot;);
                data = response.Data;
            }
            catch (FirebaseException e)
               when (e.FirebaseError != null &amp;&amp; e.FirebaseError.Error.StartsWith(&quot;Index&quot;))
            {
                await SetIndex(RolesTableName, new RoleIndex(), cancellationToken);

                var response = await _client.GetAsync&lt;Dictionary&lt;string, TRole&gt;&gt;(GetFirebasePath(RolesTableName), cancellationToken, false, $&quot;orderBy=\&quot;NormalizedName\&quot;&amp;equalTo=\&quot;{normalizedName}\&quot;&quot;);
                data = response.Data;
            }

            if (data != null)
            {
                foreach (var kv in data)
                {
                    return await FindByIdAsync(kv.Key, cancellationToken);
                }
            }
            return null;

        }

        /// &lt;summary&gt;
        /// Get a role&#39;s normalized name as an asynchronous operation.
        /// &lt;/summary&gt;
        /// &lt;param name=&quot;role&quot;&gt;The role whose normalized name should be retrieved.&lt;/param&gt;
        /// &lt;param name=&quot;cancellationToken&quot;&gt;The &lt;see cref=&quot;CancellationToken&quot;/&gt; used to propagate notifications that the operation should be canceled.&lt;/param&gt;
        /// &lt;returns&gt;A &lt;see cref=&quot;Task{TResult}&quot;/&gt; that contains the name of the role.&lt;/returns&gt;
        public virtual Task&lt;string&gt; GetNormalizedRoleNameAsync(TRole role, CancellationToken cancellationToken = default(CancellationToken))
        {
            cancellationToken.ThrowIfCancellationRequested();
            ThrowIfDisposed();
            if (role == null)
            {
                throw new ArgumentNullException(nameof(role));
            }
            return Task.FromResult(role.NormalizedName);
        }

        /// &lt;summary&gt;
        /// Set a role&#39;s normalized name as an asynchronous operation.
        /// &lt;/summary&gt;
        /// &lt;param name=&quot;role&quot;&gt;The role whose normalized name should be set.&lt;/param&gt;
        /// &lt;param name=&quot;normalizedName&quot;&gt;The normalized name to set&lt;/param&gt;
        /// &lt;param name=&quot;cancellationToken&quot;&gt;The &lt;see cref=&quot;CancellationToken&quot;/&gt; used to propagate notifications that the operation should be canceled.&lt;/param&gt;
        /// &lt;returns&gt;The &lt;see cref=&quot;Task&quot;/&gt; that represents the asynchronous operation.&lt;/returns&gt;
        public virtual Task SetNormalizedRoleNameAsync(TRole role, string normalizedName, CancellationToken cancellationToken = default(CancellationToken))
        {
            cancellationToken.ThrowIfCancellationRequested();
            ThrowIfDisposed();
            if (role == null)
            {
                throw new ArgumentNullException(nameof(role));
            }
            role.NormalizedName = normalizedName;
            return Task.CompletedTask;
        }

        /// &lt;summary&gt;
        /// Throws if this class has been disposed.
        /// &lt;/summary&gt;
        protected void ThrowIfDisposed()
        {
            if (_disposed)
            {
                throw new ObjectDisposedException(GetType().Name);
            }
        }

        /// &lt;summary&gt;
        /// Dispose the stores
        /// &lt;/summary&gt;
        public void Dispose() =&gt; _disposed = true;

        /// &lt;summary&gt;
        /// Get the claims associated with the specified &lt;paramref name=&quot;role&quot;/&gt; as an asynchronous operation.
        /// &lt;/summary&gt;
        /// &lt;param name=&quot;role&quot;&gt;The role whose claims should be retrieved.&lt;/param&gt;
        /// &lt;param name=&quot;cancellationToken&quot;&gt;The &lt;see cref=&quot;CancellationToken&quot;/&gt; used to propagate notifications that the operation should be canceled.&lt;/param&gt;
        /// &lt;returns&gt;A &lt;see cref=&quot;Task{TResult}&quot;/&gt; that contains the claims granted to a role.&lt;/returns&gt;
        public async virtual Task&lt;IList&lt;Claim&gt;&gt; GetClaimsAsync(TRole role, CancellationToken cancellationToken = default(CancellationToken))
        {
            ThrowIfDisposed();
            if (role == null)
            {
                throw new ArgumentNullException(nameof(role));
            }

            try
            {
                var response = await _client.GetAsync&lt;Dictionary&lt;string, TRoleClaim&gt;&gt;(GetFirebasePath(RoleClaimsTableName), cancellationToken, false, $&quot;orderBy=\&quot;RoleId\&quot;&amp;equalTo=\&quot;{role.Id}\&quot;&quot;);
                return response.Data.Values.Select(rc =&gt; new Claim(rc.ClaimType, rc.ClaimValue)).ToList();
            }
            catch (FirebaseException e)
               when (e.FirebaseError != null &amp;&amp; e.FirebaseError.Error.StartsWith(&quot;Index&quot;))
            {
                await SetIndex(RoleClaimsTableName, new RoleClaimIndex(), cancellationToken);

                var response = await _client.GetAsync&lt;Dictionary&lt;string, TRoleClaim&gt;&gt;(GetFirebasePath(RoleClaimsTableName), cancellationToken, false, $&quot;orderBy=\&quot;RoleId\&quot;&amp;equalTo=\&quot;{role.Id}\&quot;&quot;);
                return response.Data.Values.Select(rc =&gt; new Claim(rc.ClaimType, rc.ClaimValue)).ToList();
            }
        }

        /// &lt;summary&gt;
        /// Adds the &lt;paramref name=&quot;claim&quot;/&gt; given to the specified &lt;paramref name=&quot;role&quot;/&gt;.
        /// &lt;/summary&gt;
        /// &lt;param name=&quot;role&quot;&gt;The role to add the claim to.&lt;/param&gt;
        /// &lt;param name=&quot;claim&quot;&gt;The claim to add to the role.&lt;/param&gt;
        /// &lt;param name=&quot;cancellationToken&quot;&gt;The &lt;see cref=&quot;CancellationToken&quot;/&gt; used to propagate notifications that the operation should be canceled.&lt;/param&gt;
        /// &lt;returns&gt;The &lt;see cref=&quot;Task&quot;/&gt; that represents the asynchronous operation.&lt;/returns&gt;
        public virtual async Task AddClaimAsync(TRole role, Claim claim, CancellationToken cancellationToken = default(CancellationToken))
        {
            ThrowIfDisposed();
            if (role == null)
            {
                throw new ArgumentNullException(nameof(role));
            }
            if (claim == null)
            {
                throw new ArgumentNullException(nameof(claim));
            }

            await _client.PostAsync(GetFirebasePath(RoleClaimsTableName), CreateRoleClaim(role, claim), cancellationToken);
        }

        /// &lt;summary&gt;
        /// Removes the &lt;paramref name=&quot;claim&quot;/&gt; given from the specified &lt;paramref name=&quot;role&quot;/&gt;.
        /// &lt;/summary&gt;
        /// &lt;param name=&quot;role&quot;&gt;The role to remove the claim from.&lt;/param&gt;
        /// &lt;param name=&quot;claim&quot;&gt;The claim to remove from the role.&lt;/param&gt;
        /// &lt;param name=&quot;cancellationToken&quot;&gt;The &lt;see cref=&quot;CancellationToken&quot;/&gt; used to propagate notifications that the operation should be canceled.&lt;/param&gt;
        /// &lt;returns&gt;The &lt;see cref=&quot;Task&quot;/&gt; that represents the asynchronous operation.&lt;/returns&gt;
        public async virtual Task RemoveClaimAsync(TRole role, Claim claim, CancellationToken cancellationToken = default(CancellationToken))
        {
            ThrowIfDisposed();
            if (role == null)
            {
                throw new ArgumentNullException(nameof(role));
            }
            if (claim == null)
            {
                throw new ArgumentNullException(nameof(claim));
            }

            Dictionary&lt;string, TRoleClaim&gt; claims;
            try
            {
                var response = await _client.GetAsync&lt;Dictionary&lt;string, TRoleClaim&gt;&gt;(GetFirebasePath(RoleClaimsTableName), cancellationToken, false, $&quot;orderBy=\&quot;RoleId\&quot;&amp;equalTo=\&quot;{role.Id}\&quot;&quot;);
                claims = response.Data;
            }
            catch (FirebaseException e)
                when (e.FirebaseError != null &amp;&amp; e.FirebaseError.Error.StartsWith(&quot;Index&quot;))
            {
                await SetIndex(RoleClaimsTableName, new RoleClaimIndex(), cancellationToken);

                var response = await _client.GetAsync&lt;Dictionary&lt;string, TRoleClaim&gt;&gt;(GetFirebasePath(RoleClaimsTableName), cancellationToken, false, $&quot;orderBy=\&quot;RoleId\&quot;&amp;equalTo=\&quot;{role.Id}\&quot;&quot;);
                claims = response.Data;
            }

            if (claims != null)
            {
                foreach(var kv in claims)
                {
                    var roleClaim = kv.Value;
                    if (roleClaim.ClaimType == claim.Type &amp;&amp; roleClaim.ClaimValue == claim.Value)
                    {
                        await _client.DeleteAsync(GetFirebasePath(RoleClaimsTableName, kv.Key), cancellationToken);
                    }
                }
            }
        }

        /// &lt;summary&gt;
        /// Creates an entity representing a role claim.
        /// &lt;/summary&gt;
        /// &lt;param name=&quot;role&quot;&gt;The associated role.&lt;/param&gt;
        /// &lt;param name=&quot;claim&quot;&gt;The associated claim.&lt;/param&gt;
        /// &lt;returns&gt;The role claim entity.&lt;/returns&gt;
        protected virtual TRoleClaim CreateRoleClaim(TRole role, Claim claim)
            =&gt; new TRoleClaim { RoleId = role.Id, ClaimType = claim.Type, ClaimValue = claim.Value };

        protected virtual string GetFirebasePath(params string[] objectPath)
        {
            return string.Join(&quot;/&quot;, objectPath);
        }

        protected virtual void SetIndex(Dictionary&lt;string, object&gt; rules, string key, object index)
        {
            rules[key] = index;
        }

        private async Task SetIndex(string onTable, object index, CancellationToken cancellationToken)
        {
            var response = await _client.GetAsync&lt;FirebaseRules&gt;(RulePath, cancellationToken);
            var rules = response.Data ?? new FirebaseRules();
            SetIndex(rules.Rules, onTable, index);
            await _client.PutAsync(RulePath, rules, cancellationToken);
        }
    }
}

    </pre>
    <script type="text/javascript">
      highlightRanges([[28,93,28,116,1],[28,117,28,118,1],[28,119,28,120,1],[58,13,58,14,1],[59,17,59,134,1],[60,17,60,52,1],[61,17,61,44,1],[62,17,62,18,0],[63,21,63,60,0],[66,17,67,17,1],[67,17,67,18,1],[67,18,68,21,1],[68,21,68,41,1],[68,41,69,21,1],[69,21,69,38,1],[69,38,70,21,1],[70,21,70,33,1],[70,33,71,17,1],[71,17,71,18,1],[71,18,71,34,1],[66,17,71,34,1],[72,13,72,14,1],[81,9,81,90,1],[82,9,82,10,1],[83,13,83,81,1],[84,13,84,72,1],[85,9,85,10,1],[90,56,90,60,0],[90,61,90,65,1],[99,9,99,10,1],[100,13,100,62,1],[101,13,101,31,1],[102,13,102,30,1],[103,13,103,14,0],[104,17,104,63,0],[106,13,106,116,1],[107,13,107,37,1],[108,13,108,51,1],[110,13,110,43,1],[111,9,111,10,1],[120,9,120,10,1],[121,13,121,62,1],[122,13,122,31,1],[123,13,123,30,1],[124,13,124,14,0],[125,17,125,63,0],[129,13,129,14,1],[130,17,130,151,1],[131,17,131,55,1],[132,13,132,14,1],[134,17,134,72,0],[135,13,135,14,0],[136,17,136,83,0],[140,13,140,43,1],[141,9,141,10,1],[150,9,150,10,1],[151,13,151,62,1],[152,13,152,31,1],[153,13,153,30,1],[154,13,154,14,0],[155,17,155,63,0],[159,13,159,14,1],[160,17,160,133,1],[161,13,161,14,1],[162,13,162,40,0],[163,13,163,14,0],[164,17,164,71,0],[165,17,165,18,0],[166,21,166,87,0],[168,17,168,23,0],[170,13,170,43,1],[171,9,171,10,1],[180,9,180,10,1],[181,13,181,62,1],[182,13,182,31,1],[183,13,183,30,1],[184,13,184,14,0],[185,17,185,63,0],[187,13,187,45,1],[188,9,188,10,1],[197,9,197,10,1],[198,13,198,62,1],[199,13,199,31,1],[200,13,200,30,1],[201,13,201,14,0],[202,17,202,63,0],[204,13,204,47,1],[205,9,205,10,1],[215,9,215,10,1],[216,13,216,62,1],[217,13,217,31,1],[218,13,218,30,1],[219,13,219,14,0],[220,17,220,63,0],[222,13,222,34,1],[223,13,223,39,1],[224,9,224,10,1],[233,9,233,10,1],[234,13,234,62,1],[235,13,235,31,1],[236,13,236,120,1],[237,13,237,38,1],[238,13,238,30,1],[239,13,239,14,1],[240,17,240,30,1],[241,17,241,55,1],[242,13,242,14,1],[244,13,244,25,1],[245,9,245,10,1],[254,9,254,10,1],[255,13,255,62,1],[256,13,256,31,1],[260,13,260,14,1],[261,17,261,201,1],[262,17,262,38,1],[263,13,263,14,1],[265,16,265,91,1],[266,13,266,14,1],[267,17,267,84,1],[269,17,269,201,1],[270,17,270,38,1],[271,13,271,14,1],[273,13,273,30,1],[274,13,274,14,1],[275,17,275,24,1],[275,26,275,32,1],[275,33,275,35,1],[275,36,275,40,1],[276,17,276,18,1],[277,21,277,75,1],[279,13,279,14,1],[280,13,280,25,1],[282,9,282,10,1],[291,9,291,10,0],[292,13,292,62,0],[293,13,293,31,0],[294,13,294,30,0],[295,13,295,14,0],[296,17,296,63,0],[298,13,298,57,0],[299,9,299,10,0],[309,9,309,10,1],[310,13,310,62,1],[311,13,311,31,1],[312,13,312,30,1],[313,13,313,14,0],[314,17,314,63,0],[316,13,316,50,1],[317,13,317,39,1],[318,9,318,10,1],[324,9,324,10,1],[325,13,325,27,1],[326,13,326,14,0],[327,17,327,67,0],[329,9,329,10,1],[334,34,334,50,0],[343,9,343,10,1],[344,13,344,31,1],[345,13,345,30,1],[346,13,346,14,0],[347,17,347,63,0],[351,13,351,14,1],[352,17,352,196,1],[353,17,353,58,1],[353,58,353,96,1],[353,96,353,107,1],[353,17,353,107,1],[356,16,356,91,1],[357,13,357,14,1],[358,17,358,94,1],[360,17,360,196,1],[361,17,361,58,1],[361,58,361,96,1],[361,96,361,107,1],[361,17,361,107,1],[363,9,363,10,1],[373,9,373,10,1],[374,13,374,31,1],[375,13,375,30,1],[376,13,376,14,0],[377,17,377,63,0],[379,13,379,31,1],[380,13,380,14,0],[381,17,381,64,0],[384,13,384,124,1],[385,9,385,10,1],[395,9,395,10,1],[396,13,396,31,1],[397,13,397,30,1],[398,13,398,14,0],[399,17,399,63,0],[401,13,401,31,1],[402,13,402,14,0],[403,17,403,64,0],[408,13,408,14,1],[409,17,409,196,1],[410,17,410,40,1],[411,13,411,14,1],[413,17,413,92,0],[414,13,414,14,0],[415,17,415,94,0],[417,17,417,196,0],[418,17,418,40,0],[419,13,419,14,0],[421,13,421,32,1],[422,13,422,14,1],[423,17,423,24,1],[423,25,423,31,1],[423,32,423,34,1],[423,35,423,41,1],[424,17,424,18,1],[425,21,425,46,1],[426,21,426,98,1],[427,21,427,22,1],[428,25,428,116,1],[429,21,429,22,1],[430,17,430,18,1],[431,13,431,14,1],[432,9,432,10,1],[441,16,441,101,1],[444,9,444,10,1],[445,13,445,49,1],[446,9,446,10,1],[449,9,449,10,1],[450,13,450,32,1],[451,9,451,10,1],[454,9,454,10,1],[455,13,455,95,1],[456,13,456,62,1],[457,13,457,51,1],[458,13,458,72,1],[459,9,459,10,1]]);
    </script>
  </body>
</html>